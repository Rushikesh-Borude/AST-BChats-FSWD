<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Smart Study â€” Revision Helper</title>
  <style>
    /* Theme: only yellow and green colors used. No white or black. */
    :root{
      --yellow:#ffd94d; /* warm yellow */
      --yellow-700:#ffcf1a;
      --green:#2e8b57;  /* sea green */
      --green-darker:#1f6a43;
      --bg:linear-gradient(180deg,var(--yellow),rgba(255,217,77,0.35));
      --card: rgba(234,247,211,0.7); /* light greenish yellow */
      --glass: rgba(46,139,87,0.06);
    }
    html,body{height:100%;margin:0;font-family:Segoe UI, system-ui, sans-serif;background:var(--bg);color:var(--green-darker);-webkit-font-smoothing:antialiased}

    /* Navbar */
    .navbar{position:sticky;top:0;display:flex;align-items:center;justify-content:space-between;padding:14px 18px;background:linear-gradient(90deg,var(--green),var(--green-darker));color:var(--yellow);z-index:40;border-bottom:4px solid rgba(255,209,77,0.12)}
    .brand{font-weight:800;font-size:1.3rem;letter-spacing:0.6px;display:flex;align-items:center;gap:10px}
    .brand .logo{width:36px;height:36px;border-radius:8px;background:linear-gradient(135deg,var(--yellow-700),var(--yellow));display:flex;align-items:center;justify-content:center;color:var(--green-darker);font-weight:800}
    .brand .title-anim{position:relative}
    .brand .title-anim::after{content:'';position:absolute;left:0;bottom:-6px;height:3px;width:30%;background:rgba(31,106,67,0.12);border-radius:3px;transition:width .4s cubic-bezier(.2,.8,.2,1)}
    .brand:hover .title-anim::after{width:100%}
    .menu-btn{width:44px;height:44px;border-radius:10px;background:transparent;border:2px solid rgba(255,209,77,0.18);display:flex;align-items:center;justify-content:center;color:var(--yellow);cursor:pointer;transition:transform .28s cubic-bezier(.2,.9,.2,1), background .2s}
    .menu-btn:hover{transform:translateY(-3px);background:rgba(46,139,87,0.06)}
    /* hamburger -> X animation */
    .menu-btn .bars{position:relative;width:20px;height:14px}
    .menu-btn .bars span{position:absolute;height:2px;background:var(--yellow);left:0;right:0;border-radius:2px;transition:all .32s}
    .menu-btn .bars span:nth-child(1){top:0}
    .menu-btn .bars span:nth-child(2){top:6px}
    .menu-btn .bars span:nth-child(3){top:12px}
    .menu-btn.open .bars span:nth-child(1){transform:translateY(6px) rotate(45deg)}
    .menu-btn.open .bars span:nth-child(2){opacity:0}
    .menu-btn.open .bars span:nth-child(3){transform:translateY(-6px) rotate(-45deg)}

    /* Toggle menu */
    .toggle-menu{position:fixed;right:18px;top:72px;background:linear-gradient(180deg,rgba(255,217,77,0.12),rgba(46,139,87,0.04));border:2px solid rgba(31,106,67,0.12);padding:10px;border-radius:12px;box-shadow:0 18px 40px rgba(46,139,87,0.08);max-width:260px;backdrop-filter: blur(6px);transform-origin:top right;transition:transform .32s cubic-bezier(.2,.9,.2,1),opacity .28s;transform:translateY(-6px) scale(.98);opacity:0;pointer-events:none}
    .toggle-menu.open{transform:translateY(0) scale(1);opacity:1;pointer-events:auto}
    .toggle-menu ul{list-style:none;padding:6px;margin:0}
    .toggle-menu li{padding:10px;border-radius:8px;margin:6px 0;cursor:pointer;color:var(--green-darker);transition:background .18s}
    .toggle-menu li:hover{background:rgba(255,209,77,0.08)}
    .toggle-menu li:active{transform:translateY(1px)}

    /* Layout */
    .container{max-width:1000px;margin:18px auto;padding:10px}
    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}
    .section{border:15px solid var(--green);padding:16px;border-radius:12px;background:linear-gradient(180deg,var(--card),rgba(255,217,77,0.08));transition:transform .18s cubic-bezier(.2,.9,.2,1),box-shadow .18s}
    .section:hover{transform:translateY(-8px);box-shadow:0 20px 40px rgba(31,106,67,0.08)}
    .section h2{margin:0 0 8px 0;color:var(--green-darker)}
    .sm{font-size:0.95rem;color:var(--green)}

    /* entry animation for sections */
    .section{opacity:0;transform:translateY(12px)}
    .section.in-view{opacity:1;transform:translateY(0);transition:all .7s cubic-bezier(.2,.9,.2,1)}

    /* Full width for some sections */
    .full{grid-column:1/-1}

    /* PDF viewer area */
    .pdf-frame{width:100%;height:420px;border:6px solid var(--yellow-700);border-radius:10px;box-shadow:0 8px 26px rgba(46,139,87,0.06)}

    /* Buttons */
    .btn{background:var(--green);color:var(--yellow);padding:10px 14px;border-radius:10px;border:2px solid rgba(255,209,77,0.12);cursor:pointer;box-shadow:0 8px 18px rgba(46,139,87,0.06);transition:transform .18s,box-shadow .18s}
    .btn:hover{transform:translateY(-3px);box-shadow:0 20px 40px rgba(46,139,87,0.08)}
    .btn.secondary{background:var(--yellow);color:var(--green);border:2px solid rgba(31,106,67,0.12)}

    /* subtle micro interaction for focus */
    .btn:focus{outline:3px solid rgba(255,217,77,0.18)}

    /* Quiz list */
    .quiz-list{display:flex;flex-direction:column;gap:8px}
    .quiz-item{padding:8px;border-radius:6px;border:2px dashed var(--yellow);background:rgba(255,234,77,0.12)}

    /* Chat */
  .chat{display:flex;flex-direction:column;height:360px;border:6px dashed var(--yellow-700);padding:10px;border-radius:10px;overflow:hidden;background:linear-gradient(180deg,rgba(255,249,200,0.06),rgba(46,139,87,0.02))}
  .messages{flex:1;overflow:auto;padding:12px;display:flex;flex-direction:column;gap:10px}
  .msg{max-width:78%;padding:10px;border-radius:10px;transform-origin:center;opacity:0;transform:translateY(8px);transition:all .36s cubic-bezier(.2,.9,.2,1)}
  .msg.show{opacity:1;transform:translateY(0)}
  .msg.user{align-self:flex-end;background:linear-gradient(180deg,var(--yellow),var(--yellow-700));color:var(--green);box-shadow:0 10px 20px rgba(46,139,87,0.06)}
  .msg.ai{align-self:flex-start;background:linear-gradient(180deg,var(--green),rgba(31,106,67,0.85));color:var(--yellow);box-shadow:0 10px 20px rgba(46,139,87,0.06)}
  .chat-input{display:flex;gap:8px;margin-top:8px}
  .chat-input input{flex:1;padding:10px;border-radius:10px;border:2px solid rgba(255,209,77,0.12);background:transparent}

  /* typing indicator */
  .typing{display:inline-block;padding:6px 10px;border-radius:10px;background:rgba(255,209,77,0.06);color:var(--green);}
  .dots{display:inline-block;width:36px;text-align:center}
  .dots span{display:inline-block;width:6px;height:6px;margin:0 2px;background:var(--green);border-radius:50%;opacity:.5;transform:translateY(0);animation:dots 1s infinite}
  .dots span:nth-child(2){animation-delay:.12s}
  .dots span:nth-child(3){animation-delay:.24s}
  @keyframes dots{50%{opacity:1;transform:translateY(-6px)}}

    /* Progress dashboard */
    .progress-grid{display:flex;gap:12px;flex-wrap:wrap}
    .stat{flex:1;min-width:140px;padding:12px;border-radius:8px;background:linear-gradient(180deg,var(--yellow),#fff0);border:3px solid var(--green)}

    /* YouTube links */
    .yt-list a{display:block;padding:8px;border-radius:6px;border:2px solid var(--yellow);margin-bottom:8px;color:var(--green-darker);text-decoration:none}

    /* Responsive */
    @media (max-width:800px){
      .grid{grid-template-columns:1fr}
      .toggle-menu{right:10px;left:10px;max-width:none}
      .pdf-frame{height:300px}
      .chat{height:260px}
    }
  </style>
</head>
<body>
  <nav class="navbar">
    <div class="brand"><div class="logo">SS</div><div class="title-anim">Smart Study</div></div>
    <button id="menuBtn" class="menu-btn" aria-label="Toggle menu"><span class="bars"><span></span><span></span><span></span></span></button>
  </nav>

  <!-- Toggle menu containing the 7 features; clicking scrolls to sections -->
  <div id="toggleMenu" class="toggle-menu" aria-hidden="true">
    <ul>
      <li data-target="pdf-selector">PDF Selector</li>
      <li data-target="pdf-viewer">PDF Viewer</li>
      <li data-target="quiz-generator">Quiz Generator</li>
      <li data-target="progress-tracker">Progress Tracker</li>
      <li data-target="ai-chat">AI Chat (Virtual Teacher)</li>
      <li data-target="cited-answers">Cited Answers</li>
      <li data-target="youtube-rec">YouTube Recommender</li>
    </ul>
  </div>

  <main class="container">
    <div class="grid">
      <!-- PDF Selector -->
      <section id="pdf-selector" class="section">
        <h2>PDF Selector</h2>
        <p class="sm">Upload your coursebook PDF or pick one of the preloaded books below.</p>
        <input id="pdfFileInput" type="file" accept="application/pdf" />
        <div style="margin-top:8px">
          <label class="sm">Preloaded PDFs:</label>
          <div style="display:flex;gap:8px;margin-top:6px">
            <!-- These are example links. In a real app you'd bundle or host PDFs. -->
            <button class="btn" data-sample="sample1.pdf">NCERT Class 11 Physics</button>
            <button class="btn" data-sample="sample2.pdf">NCERT Class 12 Biology</button>
            <button class="btn" data-sample="sample3.pdf">Chemistry Guide</button>
          </div>
        </div>
        <p id="selectedPdf" class="sm" style="margin-top:8px">No PDF selected.</p>
      </section>

      <!-- PDF Viewer -->
      <section id="pdf-viewer" class="section full">
        <h2>PDF Viewer</h2>
        <p class="sm">The selected PDF will be displayed below. Use the embed to scroll pages.</p>
        <!-- Using <embed> for simple local view. If file is from input, we create an object URL -->
        <div style="margin-top:10px">
          <embed id="pdfEmbed" src="" type="application/pdf" class="pdf-frame">Your browser does not support embedded PDFs.</embed>
        </div>
      </section>

      <!-- Quiz Generator -->
      <section id="quiz-generator" class="section">
        <h2>Quiz Generator</h2>
        <p class="sm">Generate sample MCQs and short/long answer prompts from the selected PDF (mock).</p>
        <div class="quiz-list" id="quizList">
          <!-- Questions will appear here -->
        </div>
        <div style="margin-top:8px;display:flex;gap:8px">
          <button id="genQuiz" class="btn">Generate Quiz</button>
          <button id="showAnswers" class="btn secondary">Show Answers</button>
        </div>
        <div id="quizResult" style="margin-top:8px" class="sm"></div>
      </section>

      <!-- Progress Tracker -->
      <section id="progress-tracker" class="section">
        <h2>Progress Tracker</h2>
        <p class="sm">Your quiz history is stored locally in the browser.</p>
        <div class="progress-grid" id="progressGrid">
          <!-- Stats -->
        </div>
        <div style="margin-top:8px">
          <button id="clearProgress" class="btn secondary">Clear Progress</button>
        </div>
      </section>

      <!-- AI Chat -->
      <section id="ai-chat" class="section full">
        <h2>AI Chat (Virtual Teacher)</h2>
        <p class="sm">Ask questions about your PDF. This mock AI includes citations (page numbers) when possible.</p>
        <div class="chat">
          <div id="messages" class="messages"></div>
          <div class="chat-input">
            <input id="chatInput" placeholder="Ask the virtual teacher..." />
            <button id="sendChat" class="btn">Send</button>
          </div>
        </div>
        <p class="sm" style="margin-top:8px">Note: This is a mock AI for offline use. Integrate an LLM API to get real answers.</p>
      </section>

      <!-- Cited Answers -->
      <section id="cited-answers" class="section">
        <h2>Cited Answers</h2>
        <p class="sm">Chat answers appear with short quotes and page numbers (mocked).</p>
        <div id="citations" class="sm" style="margin-top:8px"></div>
      </section>

      <!-- YouTube Recommender -->
      <section id="youtube-rec" class="section">
        <h2>YouTube Recommender</h2>
        <p class="sm">Suggested videos based on topic keywords.</p>
        <div class="yt-list" id="ytList" style="margin-top:8px">
          <!-- Sample suggestions -->
          <a href="https://www.youtube.com/watch?v=ZcH0G6K5NbM" target="_blank">NCERT Physics Chapter Summary</a>
          <a href="https://www.youtube.com/watch?v=abc123" target="_blank">Biology Quick Revision</a>
        </div>
      </section>

    </div>
  </main>

  <script>
    /* Main JavaScript for Smart Study
       - Handles menu toggle and smooth scrolling
       - PDF selection & embed via object URLs
       - Mock quiz generation and localStorage progress
       - Mock AI chat with cited answers (page numbers randomized)
    */

    // Elements
    const menuBtn = document.getElementById('menuBtn');
    const toggleMenu = document.getElementById('toggleMenu');
    const menuItems = toggleMenu.querySelectorAll('li');
    const container = document.querySelector('.container');

    // Toggle behavior with animation and aria toggle
    menuBtn.addEventListener('click', ()=>{
      const open = toggleMenu.classList.toggle('open');
      menuBtn.classList.toggle('open', open);
      toggleMenu.setAttribute('aria-hidden', String(!open));
      // small pulse animation on open
      if(open){toggleMenu.animate([{opacity:0, transform:'translateY(-6px) scale(.98)'},{opacity:1, transform:'translateY(0) scale(1)'}],{duration:320,easing:'cubic-bezier(.2,.9,.2,1)'})}
    });

    // Smooth scroll to sections when clicking a menu item
    menuItems.forEach(it=>{
      it.addEventListener('click', ()=>{
        const target = document.getElementById(it.dataset.target);
        if(target){
          target.scrollIntoView({behavior:'smooth',block:'start'});
          // close menu on mobile
          toggleMenu.classList.remove('open');
          menuBtn.classList.remove('open');
        }
      });
    });

    // --- PDF Selection ---
    const pdfInput = document.getElementById('pdfFileInput');
    const pdfEmbed = document.getElementById('pdfEmbed');
    const selectedPdfLabel = document.getElementById('selectedPdf');

    let currentPdfUrl = '';

    // Handle file upload and create object URL
    pdfInput.addEventListener('change', (e)=>{
      const f = e.target.files && e.target.files[0];
      if(!f) return;
      if(f.type !== 'application/pdf'){
        alert('Please select a PDF file.');
        return;
      }
      if(currentPdfUrl) URL.revokeObjectURL(currentPdfUrl);
      currentPdfUrl = URL.createObjectURL(f);
      pdfEmbed.src = currentPdfUrl;
      selectedPdfLabel.textContent = `Selected: ${f.name}`;
    });

    // Preloaded sample buttons (these assume external links or local files in same dir)
    document.querySelectorAll('[data-sample]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const sample = btn.dataset.sample;
        // In this single-file app we cannot bundle large PDFs. Try to load relative path if present.
        pdfEmbed.src = sample;
        selectedPdfLabel.textContent = `Selected: ${sample}`;
        // Clear any object URL we created earlier
        if(currentPdfUrl){URL.revokeObjectURL(currentPdfUrl);currentPdfUrl='';pdfInput.value=''}
      });
    });

    // --- Quiz Generator (mock) ---
    const genQuizBtn = document.getElementById('genQuiz');
    const quizList = document.getElementById('quizList');
    const showAnswersBtn = document.getElementById('showAnswers');
    const quizResult = document.getElementById('quizResult');

    function makeMockQuiz(){
      // Create a few sample questions of different types
      const q = [
        {type:'mcq',question:'What is the SI unit of force?',choices:['Newton','Joule','Pascal','Watt'],answer:0},
        {type:'short',question:'State Newton\'s second law in one sentence.',answer:'Force equals mass times acceleration.'},
        {type:'long',question:'Explain the concept of equilibrium in mechanics.',answer:'In equilibrium, net force and net torque on a body are zero, so it remains at rest or moves with constant velocity.'}
      ];
      return q;
    }

    function renderQuiz(questions){
      quizList.innerHTML='';
      questions.forEach((qq,idx)=>{
        const div = document.createElement('div');
        div.className='quiz-item';
        div.innerHTML = `<strong>Q${idx+1} (${qq.type.toUpperCase()}):</strong> ${qq.question}`;
        if(qq.type==='mcq'){
          const ul = document.createElement('div');
          qq.choices.forEach((c,i)=>{
            const r = document.createElement('div');
            r.innerHTML = `<label><input type="radio" name="q${idx}" value="${i}"/> ${c}</label>`;
            ul.appendChild(r);
          });
          div.appendChild(ul);
        } else {
          const ta = document.createElement('textarea');
          ta.rows=3;ta.style.width='100%';ta.dataset.qidx=idx;
          div.appendChild(ta);
        }
        quizList.appendChild(div);
      });
    }

    genQuizBtn.addEventListener('click', ()=>{
      const q = makeMockQuiz();
      renderQuiz(q);
      quizResult.textContent = 'Quiz generated. Answer and press "Show Answers" to grade.';
      // store current quiz for grading
      window.currentQuiz = q;
    });

    showAnswersBtn.addEventListener('click', ()=>{
      const q = window.currentQuiz || [];
      if(!q.length){quizResult.textContent='No quiz available. Generate first.';return}
      let score=0;let total=q.length;
      q.forEach((qq,idx)=>{
        if(qq.type==='mcq'){
          const sel = document.querySelector(`input[name=q${idx}]:checked`);
          if(sel && Number(sel.value)===qq.answer){score++}
        } else if(qq.type==='short'){
          const ta = document.querySelector(`textarea[data-qidx='${idx}']`);
          if(ta && ta.value.trim().length>0) score+=0.5; // partial credit for attempt
        } else if(qq.type==='long'){
          const ta = document.querySelector(`textarea[data-qidx='${idx}']`);
          if(ta && ta.value.trim().length>0) score+=0.5;
        }
      });
      // Simple scoring normalization
      const percent = Math.round((score/total)*100);
      quizResult.textContent = `Your score: ${percent}% (${score}/${total})`;

      // Save to progress (localStorage)
      saveProgress({date:new Date().toISOString(),score:percent,total});
      renderProgress();
    });

    // --- Progress Tracker (localStorage) ---
    const progressKey = 'smartstudy_progress_v1';
    const progressGrid = document.getElementById('progressGrid');
    const clearProgressBtn = document.getElementById('clearProgress');

    function loadProgress(){
      try{
        const raw = localStorage.getItem(progressKey);
        return raw?JSON.parse(raw):[];
      }catch(e){return[]}
    }
    function saveProgress(entry){
      const arr = loadProgress();
      arr.push(entry);
      localStorage.setItem(progressKey,JSON.stringify(arr));
    }
    function renderProgress(){
      const arr = loadProgress();
      const avg = arr.length?Math.round(arr.reduce((s,i)=>s+i.score,0)/arr.length):0;
      const total = arr.length;
      progressGrid.innerHTML = '';
      const s1 = document.createElement('div');s1.className='stat';s1.innerHTML=`<strong>Quizzes Taken</strong><div style="font-size:1.3rem">${total}</div>`;
      const s2 = document.createElement('div');s2.className='stat';s2.innerHTML=`<strong>Average Score</strong><div style="font-size:1.3rem">${avg}%</div>`;
      const s3 = document.createElement('div');s3.className='stat';s3.innerHTML=`<strong>Last Score</strong><div style="font-size:1.3rem">${arr.length?arr[arr.length-1].score+'%':'-'}</div>`;
      progressGrid.appendChild(s1);progressGrid.appendChild(s2);progressGrid.appendChild(s3);
    }
    clearProgressBtn.addEventListener('click', ()=>{localStorage.removeItem(progressKey);renderProgress();});

    // initial render
    renderProgress();

    // --- Mock AI Chat with citations ---
    const messagesEl = document.getElementById('messages');
    const chatInput = document.getElementById('chatInput');
    const sendChatBtn = document.getElementById('sendChat');
    const citationsEl = document.getElementById('citations');

    function appendMessage(text, who='ai', meta=''){
      const d = document.createElement('div');d.className='msg '+(who==='user'?'user':'ai');
      d.innerHTML = `<div>${text}</div>` + (meta?`<div style="margin-top:8px;font-size:0.85rem;opacity:0.95; color:rgba(31,106,67,0.9)">${meta}</div>`:'');
      messagesEl.appendChild(d);
      // animate in
      requestAnimationFrame(()=>{d.classList.add('show')});
      messagesEl.scrollTop = messagesEl.scrollHeight + 200;
    }

    // Very simple mock response generator that includes a citation
    function mockAiResponse(question){
      // pretend we looked at the PDF and found a quote with page number
      const sampleQuotes = [
        {q:'Force equals mass times acceleration',page:32},
        {q:'Conservation of energy states that energy cannot be created or destroyed',page:114},
        {q:'The structure of the atom consists of a nucleus surrounded by electrons',page:5}
      ];
      const pick = sampleQuotes[Math.floor(Math.random()*sampleQuotes.length)];
      // short answer + citation
      const answer = `Answer: ${pick.q}.`;
      const citation = `"${pick.q.slice(0,60)}..." â€” page ${pick.page}`;
      return {answer,citation};
    }

    sendChatBtn.addEventListener('click', ()=>{sendChat();});
    chatInput.addEventListener('keydown', (e)=>{if(e.key==='Enter') sendChat();});

    function sendChat(){
      const t = chatInput.value.trim();
      if(!t) return;
      appendMessage(t,'user');
      chatInput.value='';
      // Simulate typing indicator
      const typing = document.createElement('div');typing.className='msg ai';typing.innerHTML=`<div class="typing"><span class="dots"><span></span><span></span><span></span></span> Virtual teacher is typing...</div>`;
      messagesEl.appendChild(typing);
      messagesEl.scrollTop = messagesEl.scrollHeight;
      setTimeout(()=>{
        // remove typing
        typing.remove();
        const res = mockAiResponse(t);
        appendMessage(res.answer,'ai',`Citation: ${res.citation}`);
        // also show citation in the Cited Answers box (history)
        const p = document.createElement('div');p.textContent = `${new Date().toLocaleTimeString()}: ${res.citation}`;
        citationsEl.prepend(p);
      },900 + Math.random()*900);
    }

    // --- YouTube Recommender (simple keyword mapping) ---
    const ytList = document.getElementById('ytList');
    // function to suggest videos by keyword (mock)
    function suggestVideos(topic){
      const map = {
        physics:[['https://www.youtube.com/watch?v=ZcH0G6K5NbM','Physics: Key Concepts'],['https://www.youtube.com/watch?v=0aMTr6gV9BY','Vectors and Motion']],
        biology:[['https://www.youtube.com/watch?v=abc123','Biology Quick Revision'],['https://www.youtube.com/watch?v=def456','Cell Structure']] ,
        chemistry:[['https://www.youtube.com/watch?v=ghi789','Chemistry Essentials'],['https://www.youtube.com/watch?v=jkl012','Chemical Bonding']]
      };
      const key = (topic||'physics').toLowerCase().match(/physics|biology|chemistry/);
      const list = map[key?key[0]:'physics'];
      ytList.innerHTML='';
      list.forEach(it=>{
        const a = document.createElement('a');a.href=it[0];a.target='_blank';a.textContent=it[1];ytList.appendChild(a);
      });
    }
    // initial suggestions
    suggestVideos('physics');

    // --- Reveal sections on scroll using IntersectionObserver ---
    const sections = document.querySelectorAll('.section');
    const io = new IntersectionObserver((entries)=>{
      entries.forEach(en=>{
        if(en.isIntersecting) en.target.classList.add('in-view');
      });
    },{threshold:0.12});
    sections.forEach(s=>io.observe(s));

    // Accessibility: close menu when clicking outside
    document.addEventListener('click', (e)=>{
      if(!toggleMenu.contains(e.target) && e.target !== menuBtn){
        toggleMenu.classList.remove('open');menuBtn.classList.remove('open');
      }
    });

    // End of script
  </script>
</body>
</html>
